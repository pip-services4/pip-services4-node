const assert = require('chai').assert;

import { TypeCode } from '../../src/convert/TypeCode';
import { TypeMatcher } from '../../src/reflect/TypeMatcher';

suite('TypeMatcher', ()=> {

   test('Match Integer', () => {
		assert.isTrue(TypeMatcher.matchValueTypeByName("int", 123));
		assert.isTrue(TypeMatcher.matchValueTypeByName("Integer", 123));
		assert.isTrue(TypeMatcher.matchValueType(TypeCode.Long, 123));
   });

   test('Match Boolean', () => {
		assert.isTrue(TypeMatcher.matchValueTypeByName("bool", true));
		assert.isTrue(TypeMatcher.matchValueTypeByName("Boolean", true));
		assert.isTrue(TypeMatcher.matchValueType(TypeCode.Boolean, true));
   });

   test('Match Double', () => {
		assert.isTrue(TypeMatcher.matchValueTypeByName("double", 123.456));
		assert.isTrue(TypeMatcher.matchValueTypeByName("Double", 123.456));
		assert.isTrue(TypeMatcher.matchValueType(TypeCode.Double, 123.456));
   });

   test('Match String', () => {
		assert.isTrue(TypeMatcher.matchValueTypeByName("string", "ABC"));
		assert.isTrue(TypeMatcher.matchValueType(TypeCode.String, "ABC"));
   });

   test('Match DateTime', () => {
		assert.isTrue(TypeMatcher.matchValueTypeByName("date", new Date()));
		assert.isTrue(TypeMatcher.matchValueTypeByName("DateTime", new Date()));
		assert.isTrue(TypeMatcher.matchValueType(TypeCode.DateTime, new Date()));
   });

   test('Match Map', () => {
        let map = {};
		assert.isTrue(TypeMatcher.matchValueTypeByName("map", map));
		assert.isTrue(TypeMatcher.matchValueTypeByName("dict", map));
		assert.isTrue(TypeMatcher.matchValueTypeByName("Dictionary", map));
		assert.isTrue(TypeMatcher.matchValueType(TypeCode.Map, map));
   });

   test('Match Array', () => {
        let array: number[] = [];
		assert.isTrue(TypeMatcher.matchValueTypeByName("list", array));
		assert.isTrue(TypeMatcher.matchValueTypeByName("array", array));
		assert.isTrue(TypeMatcher.matchValueTypeByName("object[]", array));
		assert.isTrue(TypeMatcher.matchValueType(TypeCode.Array, array));
   });

});
